---
import { getCollection } from "astro:content";
import PageHeading from "../components/page-heading.astro";
import Project from "../components/project.astro";
import Layout from "../layouts/main.astro";

let projects = await getCollection("project");
projects = projects.sort((a, b) => {
  return new Date(b.data.date).getTime() - new Date(a.data.date).getTime();
});
---

<Layout title="My Projects">
  <section class="relative z-20 max-w-2xl mx-auto my-12 px-7 lg:px-0">
    <PageHeading
      title="My Projects"
      description="These are the main projects Iâ€™ve contributed to, including company products Iâ€™ve helped build and personal or academic projects that reflect my interests in design and technology."
    />

    <div
      class="z-50 grid items-stretch w-full grid-cols-1 my-8 gap-7 sm:gap-5 sm:grid-cols-2"
    >
      {
        projects.map((project) => (
          <Project
            name={project.data.title}
            description={project.data.description}
            image={project.data.cardImage || project.data.screenshots?.[0]}
            slug={project.slug}
          />
        ))
      }
    </div>
  </section>
</Layout>
